<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>stumpless: stumpless/memory.h 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">stumpless<span id="projectnumber">&#160;2.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('memory_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">函数</a> &#124;
<a href="#var-members">变量</a>  </div>
  <div class="headertitle"><div class="title">memory.h 文件参考</div></div>
</div><!--header-->
<div class="contents">

<p>Functions for controlling memory allocation during execution.  
<a href="#details">更多...</a></p>

<p><a href="memory_8h_source.html">浏览该文件的源代码.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:a290757bff049c42f1f7d3cb387f04072" id="r_a290757bff049c42f1f7d3cb387f04072"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a290757bff049c42f1f7d3cb387f04072">stumpless_free_all</a> (void)</td></tr>
<tr class="memdesc:a290757bff049c42f1f7d3cb387f04072"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the default target if it has been opened, frees all memory allocated internally, and performs any other necessary cleanup.  <br /></td></tr>
<tr class="separator:a290757bff049c42f1f7d3cb387f04072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a013451e970972480cbedb2454d8b9e34" id="r_a013451e970972480cbedb2454d8b9e34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a013451e970972480cbedb2454d8b9e34">stumpless_free_thread</a> (void)</td></tr>
<tr class="memdesc:a013451e970972480cbedb2454d8b9e34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees all memory allocated internally to the calling thread, and performs any other thread-specific cleanup.  <br /></td></tr>
<tr class="separator:a013451e970972480cbedb2454d8b9e34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
变量</h2></td></tr>
<tr class="memitem:a009167c2af5c80ce95ec418d004ae029" id="r_a009167c2af5c80ce95ec418d004ae029"><td class="memItemLeft" align="right" valign="top">void *(*)(size_t)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a009167c2af5c80ce95ec418d004ae029">stumpless_set_malloc</a> (void *(*malloc_func)(size_t))</td></tr>
<tr class="memdesc:a009167c2af5c80ce95ec418d004ae029"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the function used by the library to allocate memory.  <br /></td></tr>
<tr class="separator:a009167c2af5c80ce95ec418d004ae029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d30ea9a991789ddcc2ca61e0beb8cfd" id="r_a2d30ea9a991789ddcc2ca61e0beb8cfd"><td class="memItemLeft" align="right" valign="top">void(*)(void *)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2d30ea9a991789ddcc2ca61e0beb8cfd">stumpless_set_free</a> (void(*free_func)(void *))</td></tr>
<tr class="memdesc:a2d30ea9a991789ddcc2ca61e0beb8cfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the function used by the library to free memory.  <br /></td></tr>
<tr class="separator:a2d30ea9a991789ddcc2ca61e0beb8cfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab34855a8f4e908a7d845b165ecfb8162" id="r_ab34855a8f4e908a7d845b165ecfb8162"><td class="memItemLeft" align="right" valign="top">void *(*)(void *, size_t)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab34855a8f4e908a7d845b165ecfb8162">stumpless_set_realloc</a> (void *(*realloc_func)(void *, size_t))</td></tr>
<tr class="memdesc:ab34855a8f4e908a7d845b165ecfb8162"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the function used by the library to reallocate memory.  <br /></td></tr>
<tr class="separator:ab34855a8f4e908a7d845b165ecfb8162"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>Functions for controlling memory allocation during execution. </p>
<p>Some of these functions allow memory allcoation to use custom functions. This might be useful if you have your own memory allocation routines or want to lay down your own controls over memory used by the library. For example, this capability is used extensively to test for error handling in memory allocation failure scenarios, as well as to ensure that the same amount of memory is freed as is allocated. </p>
</div><h2 class="groupheader">函数说明</h2>
<a id="a290757bff049c42f1f7d3cb387f04072" name="a290757bff049c42f1f7d3cb387f04072"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a290757bff049c42f1f7d3cb387f04072">&#9670;&#160;</a></span>stumpless_free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stumpless_free_all </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the default target if it has been opened, frees all memory allocated internally, and performs any other necessary cleanup. </p>
<p>This function serves as a final exit function, which should be called when an application using the library is preparing to exit or when the library is no longer needed. Before this function is called, all targets explicitly opened must be closed (with the exception of the default target, which is opened implicitly) and no pointers to any structs should be retained. Failing to do this will result in undefined behavior.</p>
<p>Calling other functions after a call to this function is acceptable, however execution times may be longer than usual as memory used to cache objects may need to be allocated. If other functions are called, this function should be called again before exit to ensure a memory leak does not exist.</p>
<p><b>Thread Safety: MT-Unsafe</b> This function is not thread safe as it destroys resources that other threads might be using.</p>
<p><b>Async Signal Safety: AS-Unsafe heap</b> This function is not safe to call from signal handlers due to the use of the memory deallocation function to release memory.</p>
<p><b>Async Cancel Safety: AC-Unsafe heap</b> This function is not safe to call from threads that may be asynchronously cancelled, as the memory deallocation function may not be AC-Safe itself. </p>
<dl class="section examples"><dt>示例</dt><dd><a class="el" href="basic_example_8c-example.html#a8">basic_example.c</a>.</dd>
</dl>

</div>
</div>
<a id="a013451e970972480cbedb2454d8b9e34" name="a013451e970972480cbedb2454d8b9e34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a013451e970972480cbedb2454d8b9e34">&#9670;&#160;</a></span>stumpless_free_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stumpless_free_thread </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees all memory allocated internally to the calling thread, and performs any other thread-specific cleanup. </p>
<p>This function should be called in any thread that has used stumpless functions before it exits so that caches and other structures can be cleaned up. It is not a substitute for stumpless_free_all, but is called by it and can be left out if stumpless_free_all will be called later in the same thread.</p>
<p><b>Thread Safety: MT-Safe</b> This function is thread safe as it only operates on thread-local resources.</p>
<p><b>Async Signal Safety: AS-Unsafe heap</b> This function is not safe to call from signal handlers due to the use of the memory deallocation function to release memory.</p>
<p><b>Async Cancel Safety: AC-Unsafe heap</b> This function is not safe to call from threads that may be asynchronously cancelled, as the memory deallocation function may not be AC-Safe itself. </p>

</div>
</div>
<h2 class="groupheader">变量说明</h2>
<a id="a2d30ea9a991789ddcc2ca61e0beb8cfd" name="a2d30ea9a991789ddcc2ca61e0beb8cfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d30ea9a991789ddcc2ca61e0beb8cfd">&#9670;&#160;</a></span>stumpless_set_free</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(*)(void *) stumpless_set_free(void(*free_func)(void *)) </td>
          <td>(</td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>free_func&#160;</em></span>)(void *)</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the function used by the library to free memory. </p>
<p>The provided free function must be able to handle a NULL pointer as the provided argument.</p>
<p><b>Thread Safety: MT-Unsafe</b> This function is not thread safe as it changes the memory allocation scheme, which could cause an operation to use the old function for some allocation and the new function for others. If you need to set any of the memory management functions, it should be done before starting multiple threads with access to shared resources.</p>
<p><b>Async Signal Safety: AS-Unsafe</b> This function is not safe to call from signal handlers for the same reason as it is not thread safe.</p>
<p><b>Async Cancel Safety: AC-Unsafe</b> This function is not safe to call from threads that may be asynchronously cancelled, as the assignment is not guaranteed to be atomic.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">free_func</td><td>A pointer to the memory deallocation function that is desired. This function must have the same signature as the standard library <code>free</code> function (which is the default if this is not called).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>The new deallocation function. </dd></dl>

</div>
</div>
<a id="a009167c2af5c80ce95ec418d004ae029" name="a009167c2af5c80ce95ec418d004ae029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a009167c2af5c80ce95ec418d004ae029">&#9670;&#160;</a></span>stumpless_set_malloc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void *(*)(size_t) stumpless_set_malloc(void *(*malloc_func)(size_t)) </td>
          <td>(</td>
          <td class="paramtype">void *(*</td>          <td class="paramname"><span class="paramname"><em>malloc_func&#160;</em></span>)(size_t)</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the function used by the library to allocate memory. </p>
<p><b>Thread Safety: MT-Unsafe</b> This function is not thread safe as it changes the memory allocation scheme, which could cause an operation to use the old function for some allocation and the new function for others. If you need to set any of the memory management functions, it should be done before starting multiple threads with access to shared resources.</p>
<p><b>Async Signal Safety: AS-Unsafe</b> This function is not safe to call from signal handlers for the same reason as it is not thread safe.</p>
<p><b>Async Cancel Safety: AC-Unsafe</b> This function is not safe to call from threads that may be asynchronously cancelled, as the assignment is not guaranteed to be atomic.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">malloc_func</td><td>A pointer to the allocation function that is desired. This function must have the same signature as the standard library <code>malloc</code> function (which is the default if this is not called).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>The new allocation function. </dd></dl>

</div>
</div>
<a id="ab34855a8f4e908a7d845b165ecfb8162" name="ab34855a8f4e908a7d845b165ecfb8162"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab34855a8f4e908a7d845b165ecfb8162">&#9670;&#160;</a></span>stumpless_set_realloc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void *(*)(void *, size_t) stumpless_set_realloc(void *(*realloc_func)(void *, size_t)) </td>
          <td>(</td>
          <td class="paramtype">void *(*</td>          <td class="paramname"><span class="paramname"><em>realloc_func&#160;</em></span>)(void *, size_t)</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the function used by the library to reallocate memory. </p>
<p><b>Thread Safety: MT-Unsafe</b> This function is not thread safe as it changes the memory allocation scheme, which could cause an operation to use the old function for some allocation and the new function for others. If you need to set any of the memory management functions, it should be done before starting multiple threads with access to shared resources.</p>
<p><b>Async Signal Safety: AS-Unsafe</b> This function is not safe to call from signal handlers for the same reason as it is not thread safe.</p>
<p><b>Async Cancel Safety: AC-Unsafe</b> This function is not safe to call from threads that may be asynchronously cancelled, as the assignment is not guaranteed to be atomic.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">realloc_func</td><td>A pointer to the memory reallocation function that is desired. This function must have the same signature as the standard library <code>realloc</code> function (which is the default if this is not called).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>The new reallocation function. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_ba40c74cc7a9b9ece787ff31120c1693.html">stumpless</a></li><li class="navelem"><a class="el" href="memory_8h.html">memory.h</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
