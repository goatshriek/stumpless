version: "0.4.0"
classes:
  - name: "FileTarget"
    doc: >
      A target allowing logs to be written to a given file. Files are created
      as needed, and logs are appended to any existing contents.
    namespace: "stumplesscpp"
#    parent:
#      name: "Target"
#      includes: "Target.hpp"
    equivalent-struct:
      name: "stumpless_target"
      includes: "stumpless/target.h"
    constructors:
      - wrapped-function:
          name: "stumpless_open_file_target"
          includes: "stumpless/target/file.h"
          params:
            - name: "filename"
              type: "const char *"
            - name: "options"
              type: "int"
            - name: "default_facility"
              type: "int"
          return:
            type: "equivalent-struct-pointer"
    destructor:
      wrapped-function:
        name: "stumpless_close_file_target"
        includes: "stumpless/target/file.h"
        params:
          - name: "equivalent-struct-pointer"
    functions:
      - name: "AddMessage"
        doc: "Writes a message to this target."
        params:
          - name: "message"
            doc: >
              The message to log, optionally containing any format specifiers
              valid in printf.
            type: "const char *"
          - name: "..."
            doc: >
              Substitutions for any format specifiers provided in message. The
              number of substitutions provided must exactly match the number of
              specifiers given.
        wrapped-function:
          name: "stumpless_add_message"
          params:
            - value: "equivalent-struct-pointer"
            - value: "message"
            - value: "..."
      - name: "Log"
        doc: "Writes a log entry to this target."
        params:
          - name: "entry"
            type: "Entry"
            doc: "the entry to write"
            includes: "Entry.hpp"
        wrapped-function:
          name: "stumpless_add_entry"
          includes: "stumpless/target.h"
          params:
            - value: "equivalent-struct-pointer"
            - value: "entry"
              type: "struct stumpless_entry *"
          return:
            type: "int"
          use-template: "int-return-error-check"
