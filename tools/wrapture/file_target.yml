version: "0.4.0"
classes:
  - name: "FileTarget"
    doc: >
      A target allowing logs to be written to a given file. Files are created
      as needed, and logs are appended to any existing contents.
    namespace: "stumplesscpp"
#    parent:
#      name: "Target"
#      includes: "Target.hpp"
    equivalent-struct:
      name: "stumpless_target"
      includes: "stumpless/target.h"
    constructors:
      - wrapped-function:
          name: "stumpless_open_file_target"
          includes: "stumpless/target/file.h"
          params:
            - name: "filename"
              type: "const char *"
            - name: "options"
              type: "int"
            - name: "default_facility"
              type: "int"
          return:
            type: "equivalent-struct-pointer"
    destructor:
      wrapped-function:
        name: "stumpless_close_file_target"
        includes: "stumpless/target/file.h"
        params:
          - name: "equivalent-struct-pointer"
    functions:
      - name: "AddMessage"
        doc: "Writes a message to this target."
        params:
          - name: "message"
            doc: >
              The message to log, optionally containing any format specifiers
              valid in printf.
            type: "const char *"
          - name: "..."
            doc: >
              Substitutions for any format specifiers provided in message. The
              number of substitutions provided must exactly match the number of
              specifiers given.
        wrapped-function:
          name: "stumpless_add_message"
          params:
            - value: "equivalent-struct-pointer"
            - value: "message"
            - value: "..."
      - name: "GetDefaultFacility"
        doc: "Gets the default facility of this target."
        return:
          doc: "The default facility of this target."
        wrapped-function:
          name: "stumpless_get_default_facility"
          includes: "stumpless/target.h"
          params:
            - value: "equivalent-struct-pointer"
      - name: "GetOption"
        doc: >
          Gets the given option for this target.

          While the returned value is the option if it is set, callers can also
          simply use the truth value of the return to see if the provided option
          is set.
        params:
          - name: "option"
            doc: "The option to check this target for."
            type: "int"
        return:
          doc: >
            The option if it is set on the target. If the option is not set,
            then zero is returned.
        wrapped-function:
          name: "stumpless_get_option"
          includes: "stumpless/target.h"
          params:
            - value: "equivalent-struct-pointer"
            - value: "option"
      - name: "Log"
        doc: "Writes a log entry to this target."
        params:
          - name: "entry"
            doc: "the entry to write"
            type: "Entry"
            includes: "Entry.hpp"
        wrapped-function:
          name: "stumpless_add_entry"
          includes: "stumpless/target.h"
          params:
            - value: "equivalent-struct-pointer"
            - value: "entry"
              type: "struct stumpless_entry *"
          return:
            type: "int"
          use-template: "int-return-error-check"
      - name: "Open"
        doc: "Opens this target if it has been paused."
        wrapped-function:
          name: "stumpless_open_target"
          includes: "stumpless/target.h"
          params:
            - value: "equivalent-struct-pointer"
      - name: "SetDefaultFacility"
        doc: "Sets the default facility of the target."
        params:
          - name: "facility"
            doc: >
              The default facility for the target to use. This should be a
              STUMPLESS_FACILITY value.
            type: "int"
        return:
          doc: "The modified target."
          type: "self-reference"
        wrapped-function:
          name: "stumpless_set_default_facility"
          includes: "stumpless/target.h"
          params:
            - value: "equivalent-struct-pointer"
            - value: "facility"
# remaining functions to wrap:
# stumpless_set_option
# stumpless_set_target_default_app_name
# stumpless_set_target_default_msgid
# stumpless_target_is_open
# stumpless_unset_option
